# The root route with all parameters, which are inherited by the child
# routes if they are not overwritten.
route:
  receiver: 'default-receiver'
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 2m
  group_by: [cluster, alertname]
  # All alerts that do not match the following child routes
  # will remain at the root node and be dispatched to 'default-receiver'.
  routes:
  # All alerts with service=mysql or service=cassandra
  # are dispatched to the database pager.
  - receiver: 'default-receiver'
    group_wait: 10s
    match_re:
      alertname: "InstanceDown"
      alertname: "ClusterDown"

receivers:
- name: 'default-receiver'
  slack_configs:
  - api_url: <SLACK-URL>
    channel: 'random'
    send_resolved: true
    text: '{{ range .Alerts }}{{ .Annotations.description }}\n{{ end }}'

inhibit_rules:
  - source_match:
      alertname: "ClusterDown"
    target_match:
      alertname: "InstanceDown"
    equal: ['service']
